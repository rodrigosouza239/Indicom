{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/rodrigo/indicom/app/pages/Amigos/Comentario.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport { useNavigation } from '@react-navigation/native';\nimport AuthContext from \"../../contexts/auth\";\nimport Api from \"../../services/Api\";\nimport Button from \"../../components/Button\";\nimport Footer from \"../../components/template/Footer\";\nimport Nota from \"./components/Nota\";\nimport UserIcon from \"../../../assets/img/user-icon.png\";\nvar Styles = StyleSheet.create({\n  wrapper: {\n    flex: 1,\n    flexDirection: 'column',\n    backgroundColor: '#FFFEAB',\n    fontFamily: 'Montserrat'\n  },\n  imageContainer: {\n    flexDirection: 'row',\n    alignSelf: 'center',\n    alignItems: 'center',\n    width: '90%',\n    marginTop: 30\n  },\n  iconImg: {\n    width: 60,\n    height: 60,\n    marginRight: 10,\n    borderRadius: 30\n  },\n  avaliar: {\n    alignSelf: 'center',\n    alignItems: 'center',\n    marginTop: 20\n  },\n  avaliarText: {\n    fontSize: 26,\n    fontWeight: 'bold'\n  },\n  comentarioContainer: {\n    alignSelf: 'center',\n    marginTop: 20,\n    width: '90%'\n  },\n  comentarioInput: {\n    width: '100%',\n    height: 150,\n    backgroundColor: '#FFF',\n    padding: 15,\n    borderColor: 'rgba(0, 0, 0, 0.25)',\n    borderRadius: 8\n  },\n  caracteres: {\n    paddingLeft: 10,\n    fontSize: 12,\n    alignSelf: 'flex-end'\n  }\n});\n\nvar Comentario = function Comentario(_ref) {\n  var route = _ref.route;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      comentario = _useState2[0],\n      setComentario = _useState2[1];\n\n  var _useState3 = useState(5),\n      _useState4 = _slicedToArray(_useState3, 2),\n      nota = _useState4[0],\n      setNota = _useState4[1];\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user,\n      setLoading = _useContext.setLoading;\n\n  var currentProfile = route.params.currentProfile;\n  var navigation = useNavigation();\n\n  var handleChange = function handleChange(value) {\n    return setComentario(value);\n  };\n\n  var handleSubmit = function handleSubmit() {\n    var newComment, response;\n    return _regeneratorRuntime.async(function handleSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            newComment = {\n              fromUserId: user.id,\n              toUserId: currentProfile.id,\n              content: comentario,\n              rate: nota\n            };\n            setLoading(true);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(Api.post('v1/comments', _objectSpread({}, newComment)));\n\n          case 4:\n            response = _context.sent;\n            setLoading(false);\n\n            if (!(response.status !== 201)) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Alert.alert('Erro', 'Houve um erro ao se comunicar com o servidor, tente novamente mais tarde!'));\n\n          case 8:\n            return _context.abrupt(\"return\", navigation.navigate('AmigosPerfil', {\n              currentProfile: currentProfile,\n              newComment: newComment\n            }));\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(View, {\n    style: Styles.wrapper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, React.createElement(KeyboardAwareScrollView, {\n    resetScrollToCoords: {\n      x: 0,\n      y: 0\n    },\n    scrollEnabled: false,\n    keyboardOpeningTime: 0,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: Styles.imageContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }, React.createElement(Image, {\n    source: currentProfile.Image !== null ? {\n      uri: currentProfile.Image.imageUrl\n    } : UserIcon,\n    resizeMethod: \"scale\",\n    style: Styles.iconImg,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, currentProfile.name)), React.createElement(View, {\n    style: Styles.avaliar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: Styles.avaliarText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, \"Avaliar\"), React.createElement(Nota, {\n    handleVoto: setNota,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  })), React.createElement(View, {\n    style: Styles.comentarioContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }, React.createElement(TextInput, {\n    style: Styles.comentarioInput,\n    multiline: true,\n    onChangeText: handleChange,\n    placeholder: \"Escreve aqui seu coment\\xE1rio:\",\n    value: comentario,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    style: Styles.caracteres,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }, \"Restam \", 300 - comentario.length, \" caracteres.\"), React.createElement(Button, {\n    customStyles: {\n      alignSelf: 'center',\n      backgroundColor: '#FFD500',\n      marginTop: 20,\n      width: '80%'\n    },\n    disabled: comentario.length === 0,\n    onPress: handleSubmit,\n    maxLength: \"300\",\n    textColor: \"#000\",\n    label: \"Enviar Coment\\xE1rio\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  })))), React.createElement(Footer, {\n    active: \"Amigos\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Comentario;","map":{"version":3,"sources":["/Users/rodrigo/indicom/app/pages/Amigos/Comentario.jsx"],"names":["React","useState","useContext","KeyboardAwareScrollView","useNavigation","AuthContext","Api","Button","Footer","Nota","UserIcon","Styles","StyleSheet","create","wrapper","flex","flexDirection","backgroundColor","fontFamily","imageContainer","alignSelf","alignItems","width","marginTop","iconImg","height","marginRight","borderRadius","avaliar","avaliarText","fontSize","fontWeight","comentarioContainer","comentarioInput","padding","borderColor","caracteres","paddingLeft","Comentario","route","comentario","setComentario","nota","setNota","user","setLoading","currentProfile","params","navigation","handleChange","value","handleSubmit","newComment","fromUserId","id","toUserId","content","rate","post","response","status","Alert","alert","navigate","x","y","Image","uri","imageUrl","name","length"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport { View, Text, Image, StyleSheet, TextInput, Alert } from 'react-native';\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport { useNavigation } from '@react-navigation/native';\nimport AuthContext from '../../contexts/auth';\nimport Api from '../../services/Api';\n\nimport Button from '../../components/Button';\nimport Footer from '../../components/template/Footer';\nimport Nota from './components/Nota';\n\nimport UserIcon from '../../../assets/img/user-icon.png';\n\nconst Styles = StyleSheet.create({\n  wrapper: {\n    flex: 1,\n    flexDirection: 'column',\n    backgroundColor: '#FFFEAB',\n    fontFamily: 'Montserrat',\n  },\n  imageContainer: {\n    flexDirection: 'row',\n    alignSelf: 'center',\n    alignItems: 'center',\n    width: '90%',\n    marginTop: 30,\n  },\n  iconImg: {\n    width: 60,\n    height: 60,\n    marginRight: 10,\n    borderRadius: 30,\n  },\n  avaliar: {\n    alignSelf: 'center',\n    alignItems: 'center',\n    marginTop: 20,\n  },\n  avaliarText: {\n    fontSize: 26,\n    fontWeight: 'bold',\n  },\n  comentarioContainer: {\n    alignSelf: 'center',\n    marginTop: 20,\n    width: '90%',\n  },\n  comentarioInput: {\n    width: '100%',\n    height: 150,\n    backgroundColor: '#FFF',\n    padding: 15,\n    borderColor: 'rgba(0, 0, 0, 0.25)',\n    borderRadius: 8,\n  },\n  caracteres: {\n    paddingLeft: 10,\n    fontSize: 12,\n    alignSelf: 'flex-end',\n  },\n});\n\nconst Comentario = ({ route }) => {\n  const [comentario, setComentario] = useState('');\n  const [nota, setNota] = useState(5);\n  const { user, setLoading } = useContext(AuthContext);\n  const { currentProfile } = route.params;\n  const navigation = useNavigation();\n\n  const handleChange = (value) => setComentario(value);\n\n  const handleSubmit = async () => {\n    const newComment = {\n      fromUserId: user.id,\n      toUserId: currentProfile.id,\n      content: comentario,\n      rate: nota,\n    };\n    setLoading(true);\n    const response = await Api.post('v1/comments', { ...newComment });\n    setLoading(false);\n    if (response.status !== 201)\n      return Alert.alert(\n        'Erro',\n        'Houve um erro ao se comunicar com o servidor, tente novamente mais tarde!'\n      );\n\n    return navigation.navigate('AmigosPerfil', { currentProfile, newComment });\n  };\n\n  return (\n    <>\n      <View style={Styles.wrapper}>\n        <KeyboardAwareScrollView\n          resetScrollToCoords={{ x: 0, y: 0 }}\n          scrollEnabled={false}\n          keyboardOpeningTime={0}\n        >\n          <View style={Styles.imageContainer}>\n            <Image\n              source={\n                currentProfile.Image !== null\n                  ? { uri: currentProfile.Image.imageUrl }\n                  : UserIcon\n              }\n              resizeMethod=\"scale\"\n              style={Styles.iconImg}\n            />\n            <Text>{currentProfile.name}</Text>\n          </View>\n          <View style={Styles.avaliar}>\n            <Text style={Styles.avaliarText}>Avaliar</Text>\n            <Nota handleVoto={setNota} />\n          </View>\n          <View style={Styles.comentarioContainer}>\n            <TextInput\n              style={Styles.comentarioInput}\n              multiline\n              onChangeText={handleChange}\n              placeholder=\"Escreve aqui seu comentário:\"\n              value={comentario}\n            />\n            <Text style={Styles.caracteres}>\n              Restam {300 - comentario.length} caracteres.\n            </Text>\n            <Button\n              customStyles={{\n                alignSelf: 'center',\n                backgroundColor: '#FFD500',\n                marginTop: 20,\n                width: '80%',\n              }}\n              disabled={comentario.length === 0}\n              onPress={handleSubmit}\n              maxLength=\"300\"\n              textColor=\"#000\"\n              label=\"Enviar Comentário\"\n            />\n          </View>\n        </KeyboardAwareScrollView>\n      </View>\n      <Footer active=\"Amigos\" />\n    </>\n  );\n};\n\nexport default Comentario;\n"]},"metadata":{},"sourceType":"module"}