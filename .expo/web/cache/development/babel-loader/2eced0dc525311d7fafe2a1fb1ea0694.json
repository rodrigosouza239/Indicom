{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/bayons/indicom-app-master/app/pages/MeusInteresses/MeusInteresses.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ApplicationContext from \"../../contexts/application\";\nimport AuthContext from \"../../contexts/auth\";\nimport Styles from \"./Styles\";\nimport Api from \"../../services/Api\";\nimport Button from \"../../components/Button\";\nimport Dropdown from \"../../components/Dropdown\";\nimport CheckboxList from \"./CheckboxList\";\nimport Footer from \"../../components/template/Footer\";\nimport UserIcon from \"../../../assets/img/user-icon.png\";\n\nvar MeusInteresses = function MeusInteresses(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      list = _useState2[0],\n      setList = _useState2[1];\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user,\n      setUser = _useContext.setUser,\n      setLoading = _useContext.setLoading;\n\n  var _useContext2 = useContext(ApplicationContext),\n      setCreatedUser = _useContext2.setCreatedUser;\n\n  useEffect(function () {\n    var fetchApiData = function fetchApiData() {\n      var response, interestsList, activities;\n      return _regeneratorRuntime.async(function fetchApiData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(Api.get('v1/activities'));\n\n            case 3:\n              response = _context.sent;\n\n              if (response.status !== 200) {\n                Alert.alert('Erro', 'Houve um erro no servidor, tente novamente mais tarde');\n              } else {\n                interestsList = user.interests.map(function (i) {\n                  return i.id;\n                });\n                setLoading(false);\n                activities = response.data.map(function (activity) {\n                  var nest = activity.nest.map(function (subActivity) {\n                    return {\n                      id: subActivity.id,\n                      label: subActivity.name,\n                      checked: interestsList.includes(subActivity.id)\n                    };\n                  });\n                  return {\n                    id: activity.id,\n                    label: activity.name,\n                    open: false,\n                    data: nest\n                  };\n                });\n                setList(activities);\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    fetchApiData();\n    setCreatedUser(false);\n  }, []);\n\n  var handleSalvar = function handleSalvar() {\n    var meusInteresses, response, newUser;\n    return _regeneratorRuntime.async(function handleSalvar$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            meusInteresses = [];\n            list.map(function (categoria) {\n              return categoria.data.map(function (subCategoria) {\n                return subCategoria.checked && meusInteresses.push(subCategoria.id);\n              });\n            });\n\n            if (!(meusInteresses.length === 0)) {\n              _context2.next = 4;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", Alert.alert('Erro', 'É obrigatório escolher pelo menos 1 interesse'));\n\n          case 4:\n            setLoading(true);\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(Api.post(\"v1/users/\" + user.id + \"/interests\", {\n              interests: meusInteresses\n            }));\n\n          case 7:\n            response = _context2.sent;\n            setLoading(false);\n\n            if (response) {\n              _context2.next = 11;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", Alert.alert('Erro', 'Houve um erro no servidor, tente novamente mais tarde'));\n\n          case 11:\n            newUser = _objectSpread(_objectSpread({}, user), {}, {\n              interests: response.data.interests\n            });\n            setUser(newUser);\n            return _context2.abrupt(\"return\", navigation.navigate('Home'));\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var handleOpen = function handleOpen(item) {\n    var newList = list.map(function (i) {\n      if (i.id === item.id && !item.open) return _objectSpread(_objectSpread({}, i), {}, {\n        open: true\n      });\n      return _objectSpread(_objectSpread({}, i), {}, {\n        open: false\n      });\n    });\n    setList(newList);\n  };\n\n  var handleCheck = function handleCheck(item) {\n    var newList = list.map(function (categoria) {\n      var newData = categoria.data.map(function (subCategoria) {\n        return subCategoria.id === item.id ? _objectSpread(_objectSpread({}, subCategoria), {}, {\n          checked: !subCategoria.checked\n        }) : subCategoria;\n      });\n      return _objectSpread(_objectSpread({}, categoria), {}, {\n        data: newData\n      });\n    });\n    setList(newList);\n  };\n\n  return React.createElement(View, {\n    style: Styles.wrapper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, React.createElement(ScrollView, {\n    contentContainerStyle: Styles.container,\n    style: {\n      width: '100%',\n      height: '100%',\n      marginTop: 20\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: Styles.imageContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }\n  }, React.createElement(Image, {\n    source: user.Image !== null ? {\n      uri: user.Image.imageUrl\n    } : UserIcon,\n    resizeMethod: \"scale\",\n    style: Styles.iconImg,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 11\n    }\n  }), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, \"Bem vindo \", user.name, \"!\")), React.createElement(Text, {\n    style: Styles.subTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, \"Meus Interesses\"), React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, \"Quais ofertas deseja receber?\"), React.createElement(View, {\n    style: Styles.socialMediaContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }\n  }, list.filter(function (i) {\n    return i.label !== 'EMPREGO/TRABALHO';\n  }).map(function (item) {\n    return React.createElement(Dropdown, {\n      key: item.id,\n      onPress: function onPress() {\n        return handleOpen(item);\n      },\n      handleOpen: item.open,\n      label: item.label,\n      style: Styles.dropdownContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, React.createElement(CheckboxList, {\n      handleCheck: handleCheck,\n      items: item.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }));\n  }), React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    style: Styles.empregoTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, \"Ofertas de Emprego\"), React.createElement(Text, {\n    style: Styles.empregoSubTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, \"Ofere\\xE7a vagas de servi\\xE7o\")), list.filter(function (i) {\n    return i.label === 'EMPREGO/TRABALHO';\n  }).map(function (item) {\n    return React.createElement(Dropdown, {\n      key: item.id,\n      onPress: function onPress() {\n        return handleOpen(item);\n      },\n      handleOpen: item.open,\n      label: item.label,\n      style: Styles.dropdownContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, React.createElement(CheckboxList, {\n      handleCheck: handleCheck,\n      items: item.data,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }\n    }));\n  }), React.createElement(Button, {\n    onPress: handleSalvar,\n    customStyles: {\n      backgroundColor: '#00C068',\n      marginTop: 15,\n      width: '60%',\n      alignSelf: 'center'\n    },\n    textColor: \"#FFF\",\n    label: \"SALVAR\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }))), React.createElement(Footer, {\n    active: \"Interesses\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default MeusInteresses;","map":{"version":3,"sources":["/home/bayons/indicom-app-master/app/pages/MeusInteresses/MeusInteresses.jsx"],"names":["React","useContext","useState","useEffect","ApplicationContext","AuthContext","Styles","Api","Button","Dropdown","CheckboxList","Footer","UserIcon","MeusInteresses","navigation","list","setList","user","setUser","setLoading","setCreatedUser","fetchApiData","get","response","status","Alert","alert","interestsList","interests","map","i","id","activities","data","activity","nest","subActivity","label","name","checked","includes","open","handleSalvar","meusInteresses","categoria","subCategoria","push","length","post","newUser","navigate","handleOpen","item","newList","handleCheck","newData","wrapper","container","width","height","marginTop","imageContainer","Image","uri","imageUrl","iconImg","subTitle","socialMediaContainer","filter","dropdownContainer","empregoTitle","empregoSubTitle","backgroundColor","alignSelf"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\nimport { View, Text, Image, ScrollView, Alert } from 'react-native';\nimport ApplicationContext from '../../contexts/application';\nimport AuthContext from '../../contexts/auth';\nimport Styles from './Styles';\nimport Api from '../../services/Api';\n\nimport Button from '../../components/Button';\nimport Dropdown from '../../components/Dropdown';\nimport CheckboxList from './CheckboxList';\nimport Footer from '../../components/template/Footer';\n\nimport UserIcon from '../../../assets/img/user-icon.png';\n\nconst MeusInteresses = ({ navigation }) => {\n  const [list, setList] = useState([]);\n  const { user, setUser, setLoading } = useContext(AuthContext);\n  const { setCreatedUser } = useContext(ApplicationContext);\n  // console.log(user);\n  useEffect(() => {\n    const fetchApiData = async () => {\n      setLoading(true);\n      const response = await Api.get('v1/activities');\n      if (response.status !== 200) {\n        Alert.alert(\n          'Erro',\n          'Houve um erro no servidor, tente novamente mais tarde'\n        );\n      } else {\n        const interestsList = user.interests.map((i) => i.id);\n        setLoading(false);\n        const activities = response.data.map((activity) => {\n          const nest = activity.nest.map((subActivity) => {\n            return {\n              id: subActivity.id,\n              label: subActivity.name,\n              checked: interestsList.includes(subActivity.id),\n            };\n          });\n          return {\n            id: activity.id,\n            label: activity.name,\n            open: false,\n            data: nest,\n          };\n        });\n        setList(activities);\n      }\n    };\n    fetchApiData();\n\n    setCreatedUser(false);\n  }, []);\n\n  const handleSalvar = async () => {\n    const meusInteresses = [];\n    list.map((categoria) =>\n      categoria.data.map(\n        (subCategoria) =>\n          subCategoria.checked && meusInteresses.push(subCategoria.id)\n      )\n    );\n    if (meusInteresses.length === 0) {\n      return Alert.alert(\n        'Erro',\n        'É obrigatório escolher pelo menos 1 interesse'\n      );\n    }\n    setLoading(true);\n    const response = await Api.post(`v1/users/${user.id}/interests`, {\n      interests: meusInteresses,\n    });\n    setLoading(false);\n    if (!response)\n      return Alert.alert(\n        'Erro',\n        'Houve um erro no servidor, tente novamente mais tarde'\n      );\n\n    const newUser = {\n      ...user,\n      interests: response.data.interests,\n    };\n    setUser(newUser);\n    return navigation.navigate('Home');\n  };\n\n  const handleOpen = (item) => {\n    const newList = list.map((i) => {\n      if (i.id === item.id && !item.open) return { ...i, open: true };\n      return { ...i, open: false };\n    });\n    setList(newList);\n  };\n\n  const handleCheck = (item) => {\n    const newList = list.map((categoria) => {\n      const newData = categoria.data.map((subCategoria) =>\n        subCategoria.id === item.id\n          ? { ...subCategoria, checked: !subCategoria.checked }\n          : subCategoria\n      );\n      return { ...categoria, data: newData };\n    });\n    setList(newList);\n  };\n\n  return (\n    <View style={Styles.wrapper}>\n      <ScrollView\n        contentContainerStyle={Styles.container}\n        style={{ width: '100%', height: '100%', marginTop: 20 }}\n      >\n        <View style={Styles.imageContainer}>\n          <Image\n            source={\n              user.Image !== null ? { uri: user.Image.imageUrl } : UserIcon\n            }\n            resizeMethod=\"scale\"\n            style={Styles.iconImg}\n          />\n          <Text>Bem vindo {user.name}!</Text>\n        </View>\n        <Text style={Styles.subTitle}>Meus Interesses</Text>\n        <Text>Quais ofertas deseja receber?</Text>\n        <View style={Styles.socialMediaContainer}>\n          {list\n            .filter((i) => i.label !== 'EMPREGO/TRABALHO')\n            .map((item) => (\n              <Dropdown\n                key={item.id}\n                onPress={() => handleOpen(item)}\n                handleOpen={item.open}\n                label={item.label}\n                style={Styles.dropdownContainer}\n              >\n                <CheckboxList handleCheck={handleCheck} items={item.data} />\n              </Dropdown>\n            ))}\n          <View>\n            <Text style={Styles.empregoTitle}>Ofertas de Emprego</Text>\n            <Text style={Styles.empregoSubTitle}>Ofereça vagas de serviço</Text>\n          </View>\n          {list\n            .filter((i) => i.label === 'EMPREGO/TRABALHO')\n            .map((item) => (\n              <Dropdown\n                key={item.id}\n                onPress={() => handleOpen(item)}\n                handleOpen={item.open}\n                label={item.label}\n                style={Styles.dropdownContainer}\n              >\n                <CheckboxList handleCheck={handleCheck} items={item.data} />\n              </Dropdown>\n            ))}\n          <Button\n            onPress={handleSalvar}\n            customStyles={{\n              backgroundColor: '#00C068',\n              marginTop: 15,\n              width: '60%',\n              alignSelf: 'center',\n            }}\n            textColor=\"#FFF\"\n            label=\"SALVAR\"\n          />\n        </View>\n      </ScrollView>\n      <Footer active=\"Interesses\" />\n    </View>\n  );\n};\n\nexport default MeusInteresses;\n"]},"metadata":{},"sourceType":"module"}