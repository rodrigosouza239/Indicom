{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/rodrigo/indicom/app/pages/Ofertas/OfertasRecebidas.jsx\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Icon from \"@expo/vector-icons/FontAwesome5\";\nimport AuthContext from \"../../contexts/auth\";\nimport ApplicationContext from \"../../contexts/application\";\nimport Api from \"../../services/Api\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport Footer from \"../../components/template/Footer\";\nimport OfertaCard from \"./components/OfertaCard\";\nimport AdicionarButton from \"./components/AdicionarButton\";\nimport MenuLateral from \"./components/MenuLateral\";\nvar styles = StyleSheet.create({\n  wrapper: {\n    flex: 1,\n    flexDirection: 'column',\n    backgroundColor: '#FFFEAB',\n    fontFamily: 'Montserrat',\n    height: '100%'\n  },\n  body: {\n    flex: 1,\n    height: '100%'\n  },\n  ofertasHeader: {\n    flexDirection: 'row',\n    marginTop: 45,\n    marginBottom: 20,\n    paddingLeft: 15\n  },\n  titleHeaderWrapper: {\n    paddingLeft: 10\n  },\n  titleHeader: {\n    fontWeight: 'bold',\n    fontSize: 18\n  },\n  titleHeaderSub: {\n    fontSize: 11\n  },\n  ofertasContainer: {\n    width: '95%',\n    alignSelf: 'center',\n    marginBottom: 10\n  }\n});\n\nvar Ofertas = function Ofertas() {\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user,\n      setLoading = _useContext.setLoading;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      menuOpen = _useState2[0],\n      setMenuOpen = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      ofertas = _useState4[0],\n      setOfertas = _useState4[1];\n\n  var _useContext2 = useContext(ApplicationContext),\n      countBadgesOfertas = _useContext2.countBadgesOfertas,\n      setcountBadgesOfertas = _useContext2.setcountBadgesOfertas,\n      setultimasofertasvisualizadas = _useContext2.setultimasofertasvisualizadas;\n\n  useEffect(function () {\n    var fetchApiData = function fetchApiData() {\n      var interests, response;\n      return _regeneratorRuntime.async(function fetchApiData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              interests = user.interests.map(function (interest) {\n                return interest.id;\n              });\n              setLoading(true);\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(Api.post('v1/jobs', {\n                interests: interests\n              }));\n\n            case 4:\n              response = _context.sent;\n\n              if (!(response.status !== 200)) {\n                _context.next = 9;\n                break;\n              }\n\n              Alert.alert('Atenção', 'Houve um erro no servidor, tente novamente mais tarde');\n              _context.next = 15;\n              break;\n\n            case 9:\n              setLoading(false);\n              setOfertas(response.data);\n              response.data && setultimasofertasvisualizadas(response.data.length);\n              _context.next = 14;\n              return _regeneratorRuntime.awrap(AsyncStorage.setItem('@ultimasofertasvisualizadas_storage_Key', JSON.stringify(response.data.length)));\n\n            case 14:\n              setcountBadgesOfertas(0);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    fetchApiData();\n  }, []);\n  return React.createElement(View, {\n    style: styles.wrapper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.body,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableWithoutFeedback, {\n    onPress: function onPress() {\n      return setMenuOpen(!menuOpen);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.ofertasHeader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  }, React.createElement(Icon, {\n    name: \"bars\",\n    size: 20,\n    solid: true,\n    color: \"#000\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }), React.createElement(View, {\n    style: styles.titleHeaderWrapper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.titleHeader,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 15\n    }\n  }, \"Ofertas Recebidas\"), React.createElement(Text, {\n    style: styles.titleHeaderSub,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, \"Com base nos seus interesses\")))), React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.ofertasContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, ofertas.length > 0 ? ofertas.map(function (oferta) {\n    return React.createElement(OfertaCard, {\n      oferta: oferta,\n      key: oferta.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    });\n  }) : React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, React.createElement(Text, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }, \"Nenhuma oferta encontrada\"))))), React.createElement(AdicionarButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }), React.createElement(MenuLateral, {\n    handleOpen: menuOpen,\n    handleAction: setMenuOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }), React.createElement(Footer, {\n    active: \"Ofertas\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Ofertas;","map":{"version":3,"sources":["/Users/rodrigo/indicom/app/pages/Ofertas/OfertasRecebidas.jsx"],"names":["React","useState","useEffect","useContext","Icon","AuthContext","ApplicationContext","Api","AsyncStorage","Footer","OfertaCard","AdicionarButton","MenuLateral","styles","StyleSheet","create","wrapper","flex","flexDirection","backgroundColor","fontFamily","height","body","ofertasHeader","marginTop","marginBottom","paddingLeft","titleHeaderWrapper","titleHeader","fontWeight","fontSize","titleHeaderSub","ofertasContainer","width","alignSelf","Ofertas","user","setLoading","menuOpen","setMenuOpen","ofertas","setOfertas","countBadgesOfertas","setcountBadgesOfertas","setultimasofertasvisualizadas","fetchApiData","interests","map","interest","id","post","response","status","Alert","alert","data","length","setItem","JSON","stringify","oferta"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n  TouchableWithoutFeedback,\n  Alert,\n} from 'react-native';\nimport Icon from 'react-native-vector-icons/FontAwesome5';\nimport AuthContext from '../../contexts/auth';\nimport ApplicationContext from '../../contexts/application';\nimport Api from '../../services/Api';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nimport Footer from '../../components/template/Footer';\nimport OfertaCard from './components/OfertaCard';\nimport AdicionarButton from './components/AdicionarButton';\nimport MenuLateral from './components/MenuLateral';\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    flex: 1,\n    flexDirection: 'column',\n    backgroundColor: '#FFFEAB',\n    fontFamily: 'Montserrat',\n    height: '100%',\n  },\n  body: {\n    flex: 1,\n    height: '100%',\n  },\n  ofertasHeader: {\n    flexDirection: 'row',\n    marginTop: 45,\n    marginBottom: 20,\n    paddingLeft: 15,\n  },\n  titleHeaderWrapper: {\n    paddingLeft: 10,\n  },\n  titleHeader: {\n    fontWeight: 'bold',\n    fontSize: 18,\n  },\n  titleHeaderSub: {\n    fontSize: 11,\n  },\n  ofertasContainer: {\n    width: '95%',\n    alignSelf: 'center',\n    marginBottom: 10,\n  },\n});\n\nconst Ofertas = () => {\n  const { user, setLoading } = useContext(AuthContext);\n  const [menuOpen, setMenuOpen] = useState(false);\n  const [ofertas, setOfertas] = useState([]);\n  const {countBadgesOfertas, setcountBadgesOfertas, setultimasofertasvisualizadas} = useContext(ApplicationContext);\n\n  useEffect(() => {\n    const fetchApiData = async () => {\n      const interests = user.interests.map((interest) => {\n        return interest.id;\n      });\n      setLoading(true);\n      const response = await Api.post('v1/jobs', { interests });\n      if (response.status !== 200) {\n        Alert.alert(\n          'Atenção',\n          'Houve um erro no servidor, tente novamente mais tarde'\n        );\n      } else {\n        setLoading(false);\n        setOfertas(response.data);\n        response.data && setultimasofertasvisualizadas(response.data.length)\n        await AsyncStorage.setItem('@ultimasofertasvisualizadas_storage_Key', JSON.stringify(response.data.length))\n        setcountBadgesOfertas(0)\n      }\n    };\n    fetchApiData();\n  }, []);\n\n  return (\n    <View style={styles.wrapper}>\n      <View style={styles.body}>\n        <TouchableWithoutFeedback onPress={() => setMenuOpen(!menuOpen)}>\n          <View style={styles.ofertasHeader}>\n            <Icon name=\"bars\" size={20} solid color=\"#000\" />\n\n            <View style={styles.titleHeaderWrapper}>\n              <Text style={styles.titleHeader}>Ofertas Recebidas</Text>\n              <Text style={styles.titleHeaderSub}>\n                Com base nos seus interesses\n              </Text>\n            </View>\n          </View>\n        </TouchableWithoutFeedback>\n        <ScrollView>\n          <View style={styles.ofertasContainer}>\n            {ofertas.length > 0 ? (\n              ofertas.map((oferta) => (\n                <OfertaCard\n                  oferta={oferta}\n                  key={oferta.id}\n                />\n              ))\n            ) : (\n              <View>\n                <Text>Nenhuma oferta encontrada</Text>\n              </View>\n            )}\n          </View>\n        </ScrollView>\n      </View>\n      <AdicionarButton />\n      <MenuLateral handleOpen={menuOpen} handleAction={setMenuOpen} />\n      <Footer active=\"Ofertas\" />\n    </View>\n  );\n};\n\nexport default Ofertas;\n"]},"metadata":{},"sourceType":"module"}