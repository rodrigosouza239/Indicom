{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/rodrigo/indicom/app/components/InformacoesForm/InformacoesForm.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Formik } from 'formik';\nimport * as yup from 'yup';\nimport AuthContext from \"../../contexts/auth\";\nimport Styles from \"./Styles\";\nimport * as Utils from \"./Utils\";\nimport Api from \"../../services/Api\";\nimport Button from \"../Button\";\nimport Input from \"../Input\";\nimport Select from \"../Select\";\n\nvar InformacoesForm = function InformacoesForm(_ref) {\n  var currentUser = _ref.currentUser,\n      handleCadastro = _ref.handleCadastro,\n      buttonLabel = _ref.buttonLabel,\n      buttonStyles = _ref.buttonStyles,\n      textColor = _ref.textColor,\n      textWeigth = _ref.textWeigth;\n\n  var _useContext = useContext(AuthContext),\n      setLoading = _useContext.setLoading;\n\n  var _useState = useState([{\n    label: 'Pessoa Física',\n    value: 'PF'\n  }, {\n    label: 'Pessoa Jurídica',\n    value: 'PJ'\n  }]),\n      _useState2 = _slicedToArray(_useState, 1),\n      tipoPessoa = _useState2[0];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activitiesBranches = _useState4[0],\n      setActivitiesBranches = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      economicsActivites = _useState6[0],\n      setEconomicsActivities = _useState6[1];\n\n  useEffect(function () {\n    var fetchApiData = function fetchApiData() {\n      var responseActivitiesBranches, responseEconomicsActivities;\n      return _regeneratorRuntime.async(function fetchApiData$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(Api.get('v1/activities-branches'));\n\n            case 3:\n              responseActivitiesBranches = _context.sent;\n\n              if (!(responseActivitiesBranches.status !== 200)) {\n                _context.next = 8;\n                break;\n              }\n\n              Alert.alert('Atenção', 'Houve um erro no servidor, reinicie a aplicação');\n              _context.next = 13;\n              break;\n\n            case 8:\n              setActivitiesBranches(responseActivitiesBranches.data.map(function (i) {\n                return {\n                  Name: i.name,\n                  Id: String(i.id)\n                };\n              }));\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(Api.get('v1/economics-activities'));\n\n            case 11:\n              responseEconomicsActivities = _context.sent;\n\n              if (responseEconomicsActivities.status !== 200) {\n                Alert.alert('Atenção', 'Houve um erro no servidor, reinicie a aplicação');\n              } else {\n                setEconomicsActivities(responseEconomicsActivities.data.map(function (i) {\n                  return {\n                    label: i.name,\n                    value: String(i.id)\n                  };\n                }));\n                setLoading(false);\n              }\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    fetchApiData();\n  }, []);\n  return React.createElement(View, {\n    style: Styles.wrapper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, React.createElement(Formik, {\n    enableReinitialize: true,\n    initialValues: {\n      tipoPessoa: currentUser.type,\n      ramoAtividade: String(currentUser.activityBranchId) || '',\n      nomeEmpresa: currentUser.companyName || '',\n      atividadeEconomica: String(currentUser.economicActivityId) || '',\n      celular: currentUser.whatsapp || '',\n      website: currentUser.website || '',\n      facebook: currentUser.facebook || ''\n    },\n    onSubmit: function onSubmit(data) {\n      return handleCadastro(data);\n    },\n    validationSchema: yup.object().shape({\n      tipoPessoa: yup.string().required(),\n      ramoAtividade: yup.string().when('tipoPessoa', {\n        is: 'PF',\n        then: yup.string().required()\n      }),\n      nomeEmpresa: yup.string().when('tipoPessoa', {\n        is: 'PJ',\n        then: yup.string().required()\n      }),\n      atividadeEconomica: yup.string().when('tipoPessoa', {\n        is: 'PJ',\n        then: yup.string().required()\n      }),\n      celular: yup.string().min(14).max(15).required(),\n      website: yup.string(),\n      facebook: yup.string()\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, function (_ref2) {\n    var handleChange = _ref2.handleChange,\n        setFieldValue = _ref2.setFieldValue,\n        handleBlur = _ref2.handleBlur,\n        handleSubmit = _ref2.handleSubmit,\n        values = _ref2.values,\n        errors = _ref2.errors,\n        isValid = _ref2.isValid;\n    return React.createElement(View, {\n      style: Styles.socialMediaContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, React.createElement(Text, {\n      style: Styles.labelFormText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, \"Sou:\"), React.createElement(Select, {\n      customStyle: {\n        marginBottom: 13\n      },\n      value: values.tipoPessoa,\n      placeholder: {},\n      onValueChange: handleChange('tipoPessoa'),\n      error: errors.tipoPessoa,\n      items: tipoPessoa,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 15\n      }\n    }), React.createElement(Select, {\n      customStyle: {\n        marginBottom: 13,\n        display: values.tipoPessoa === 'PJ' ? 'none' : 'flex'\n      },\n      value: values.ramoAtividade,\n      placeholder: {\n        label: 'Profissão',\n        value: ''\n      },\n      onValueChange: handleChange('ramoAtividade').bind(_this),\n      error: errors.ramoAtividade,\n      items: activitiesBranches,\n      isSearchable: values.tipoPessoa === 'PJ' ? false : true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }), React.createElement(Input, {\n      onChangeText: handleChange('nomeEmpresa'),\n      onBlur: handleBlur('nomeEmpresa'),\n      placeholder: \"Nome da Empresa:\",\n      textContentType: \"name\",\n      customStyle: {\n        marginBottom: 13,\n        display: values.tipoPessoa === 'PF' ? 'none' : 'flex'\n      },\n      error: errors.nomeEmpresa,\n      value: values.nomeEmpresa,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 15\n      }\n    }), React.createElement(Select, {\n      customStyle: {\n        marginBottom: 13,\n        display: values.tipoPessoa === 'PF' ? 'none' : 'none'\n      },\n      value: values.atividadeEconomica,\n      placeholder: {\n        label: 'Atividade Econômica',\n        value: ''\n      },\n      onValueChange: handleChange('atividadeEconomica'),\n      error: errors.atividadeEconomica,\n      items: economicsActivites,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }), React.createElement(Text, {\n      style: Styles.labelFormText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 15\n      }\n    }, \"Contatos:\"), React.createElement(Input, {\n      onChangeText: function onChangeText(e) {\n        return setFieldValue('celular', Utils.phoneMaskInput(e));\n      },\n      onBlur: handleBlur('celular'),\n      placeholder: \"WhatsApp:\",\n      textContentType: \"telephoneNumber\",\n      keyboardType: \"number-pad\",\n      maxLength: 15,\n      customStyle: {\n        marginBottom: 13\n      },\n      error: errors.celular,\n      value: values.celular,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }\n    }), React.createElement(Input, {\n      onChangeText: handleChange('website'),\n      onBlur: handleBlur('website'),\n      placeholder: \"Website:\",\n      textContentType: \"name\",\n      customStyle: {\n        marginBottom: 13\n      },\n      error: errors.website,\n      value: values.website,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 15\n      }\n    }), React.createElement(Input, {\n      onChangeText: handleChange('facebook'),\n      onBlur: handleBlur('facebook'),\n      placeholder: \"Perfil do Facebook:\",\n      textContentType: \"name\",\n      customStyle: {\n        marginBottom: 13\n      },\n      error: errors.facebook,\n      value: values.facebook,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 15\n      }\n    }), React.createElement(View, {\n      style: Styles.buttonContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }, React.createElement(Button, {\n      onPress: handleSubmit,\n      disabled: !isValid,\n      customStyles: _objectSpread({\n        alignSelf: 'center',\n        backgroundColor: '#FFD500',\n        marginTop: 15\n      }, buttonStyles),\n      textColor: textColor,\n      textWeigth: textWeigth,\n      label: buttonLabel,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 17\n      }\n    })));\n  }));\n};\n\nexport default InformacoesForm;","map":{"version":3,"sources":["/Users/rodrigo/indicom/app/components/InformacoesForm/InformacoesForm.jsx"],"names":["React","useState","useContext","useEffect","Formik","yup","AuthContext","Styles","Utils","Api","Button","Input","Select","InformacoesForm","currentUser","handleCadastro","buttonLabel","buttonStyles","textColor","textWeigth","setLoading","label","value","tipoPessoa","activitiesBranches","setActivitiesBranches","economicsActivites","setEconomicsActivities","fetchApiData","get","responseActivitiesBranches","status","Alert","alert","data","map","i","Name","name","Id","String","id","responseEconomicsActivities","wrapper","type","ramoAtividade","activityBranchId","nomeEmpresa","companyName","atividadeEconomica","economicActivityId","celular","whatsapp","website","facebook","object","shape","string","required","when","is","then","min","max","handleChange","setFieldValue","handleBlur","handleSubmit","values","errors","isValid","socialMediaContainer","labelFormText","marginBottom","display","bind","e","phoneMaskInput","buttonContainer","alignSelf","backgroundColor","marginTop"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;;;;AAEA,SAASC,MAAT,QAAuB,QAAvB;AACA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AACA,OAAOC,WAAP;AACA,OAAOC,MAAP;AACA,OAAO,KAAKC,KAAZ;AACA,OAAOC,GAAP;AAEA,OAAOC,MAAP;AACA,OAAOC,KAAP;AACA,OAAOC,MAAP;;AAEA,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,OAOlB;AAAA,MANJC,WAMI,QANJA,WAMI;AAAA,MALJC,cAKI,QALJA,cAKI;AAAA,MAJJC,WAII,QAJJA,WAII;AAAA,MAHJC,YAGI,QAHJA,YAGI;AAAA,MAFJC,SAEI,QAFJA,SAEI;AAAA,MADJC,UACI,QADJA,UACI;;AAAA,oBACmBjB,UAAU,CAACI,WAAD,CAD7B;AAAA,MACIc,UADJ,eACIA,UADJ;;AAAA,kBAEiBnB,QAAQ,CAAC,CAC5B;AAAEoB,IAAAA,KAAK,EAAE,eAAT;AAA0BC,IAAAA,KAAK,EAAE;AAAjC,GAD4B,EAE5B;AAAED,IAAAA,KAAK,EAAE,iBAAT;AAA4BC,IAAAA,KAAK,EAAE;AAAnC,GAF4B,CAAD,CAFzB;AAAA;AAAA,MAEGC,UAFH;;AAAA,mBAMgDtB,QAAQ,CAAC,EAAD,CANxD;AAAA;AAAA,MAMGuB,kBANH;AAAA,MAMuBC,qBANvB;;AAAA,mBAOiDxB,QAAQ,CAAC,EAAD,CAPzD;AAAA;AAAA,MAOGyB,kBAPH;AAAA,MAOuBC,sBAPvB;;AASJxB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMyB,YAAY,GAAG,SAAfA,YAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBR,cAAAA,UAAU,CAAC,IAAD,CAAV;AADmB;AAAA,+CAEsBX,GAAG,CAACoB,GAAJ,CACvC,wBADuC,CAFtB;;AAAA;AAEbC,cAAAA,0BAFa;;AAAA,oBAKfA,0BAA0B,CAACC,MAA3B,KAAsC,GALvB;AAAA;AAAA;AAAA;;AAMjBC,cAAAA,KAAK,CAACC,KAAN,CACE,SADF,EAEE,iDAFF;AANiB;AAAA;;AAAA;AAWjBR,cAAAA,qBAAqB,CACnBK,0BAA0B,CAACI,IAA3B,CAAgCC,GAAhC,CAAoC,UAACC,CAAD,EAAO;AACzC,uBAAO;AAAEC,kBAAAA,IAAI,EAAED,CAAC,CAACE,IAAV;AAAgBC,kBAAAA,EAAE,EAAEC,MAAM,CAACJ,CAAC,CAACK,EAAH;AAA1B,iBAAP;AACD,eAFD,CADmB,CAArB;AAXiB;AAAA,+CAgByBhC,GAAG,CAACoB,GAAJ,CACxC,yBADwC,CAhBzB;;AAAA;AAgBXa,cAAAA,2BAhBW;;AAmBjB,kBAAIA,2BAA2B,CAACX,MAA5B,KAAuC,GAA3C,EAAgD;AAC9CC,gBAAAA,KAAK,CAACC,KAAN,CACE,SADF,EAEE,iDAFF;AAID,eALD,MAKO;AACLN,gBAAAA,sBAAsB,CACpBe,2BAA2B,CAACR,IAA5B,CAAiCC,GAAjC,CAAqC,UAACC,CAAD,EAAO;AAC1C,yBAAO;AAAEf,oBAAAA,KAAK,EAAEe,CAAC,CAACE,IAAX;AAAiBhB,oBAAAA,KAAK,EAAEkB,MAAM,CAACJ,CAAC,CAACK,EAAH;AAA9B,mBAAP;AACD,iBAFD,CADoB,CAAtB;AAKArB,gBAAAA,UAAU,CAAC,KAAD,CAAV;AACD;;AA/BgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAArB;;AAmCAQ,IAAAA,YAAY;AACb,GArCQ,EAqCN,EArCM,CAAT;AAsCA,SACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAErB,MAAM,CAACoC,OAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AACE,IAAA,kBAAkB,MADpB;AAEE,IAAA,aAAa,EAAE;AACbpB,MAAAA,UAAU,EAAET,WAAW,CAAC8B,IADX;AAEbC,MAAAA,aAAa,EAAEL,MAAM,CAAC1B,WAAW,CAACgC,gBAAb,CAAN,IAAwC,EAF1C;AAGbC,MAAAA,WAAW,EAAEjC,WAAW,CAACkC,WAAZ,IAA2B,EAH3B;AAIbC,MAAAA,kBAAkB,EAAET,MAAM,CAAC1B,WAAW,CAACoC,kBAAb,CAAN,IAA0C,EAJjD;AAKbC,MAAAA,OAAO,EAAErC,WAAW,CAACsC,QAAZ,IAAwB,EALpB;AAMbC,MAAAA,OAAO,EAAEvC,WAAW,CAACuC,OAAZ,IAAuB,EANnB;AAObC,MAAAA,QAAQ,EAAExC,WAAW,CAACwC,QAAZ,IAAwB;AAPrB,KAFjB;AAWE,IAAA,QAAQ,EAAE,kBAACpB,IAAD;AAAA,aAAUnB,cAAc,CAACmB,IAAD,CAAxB;AAAA,KAXZ;AAYE,IAAA,gBAAgB,EAAE7B,GAAG,CAACkD,MAAJ,GAAaC,KAAb,CAAmB;AACnCjC,MAAAA,UAAU,EAAElB,GAAG,CAACoD,MAAJ,GAAaC,QAAb,EADuB;AAEnCb,MAAAA,aAAa,EAAExC,GAAG,CAACoD,MAAJ,GAAaE,IAAb,CAAkB,YAAlB,EAAgC;AAC7CC,QAAAA,EAAE,EAAE,IADyC;AAE7CC,QAAAA,IAAI,EAAExD,GAAG,CAACoD,MAAJ,GAAaC,QAAb;AAFuC,OAAhC,CAFoB;AAMnCX,MAAAA,WAAW,EAAE1C,GAAG,CAACoD,MAAJ,GAAaE,IAAb,CAAkB,YAAlB,EAAgC;AAC3CC,QAAAA,EAAE,EAAE,IADuC;AAE3CC,QAAAA,IAAI,EAAExD,GAAG,CAACoD,MAAJ,GAAaC,QAAb;AAFqC,OAAhC,CANsB;AAUnCT,MAAAA,kBAAkB,EAAE5C,GAAG,CAACoD,MAAJ,GAAaE,IAAb,CAAkB,YAAlB,EAAgC;AAClDC,QAAAA,EAAE,EAAE,IAD8C;AAElDC,QAAAA,IAAI,EAAExD,GAAG,CAACoD,MAAJ,GAAaC,QAAb;AAF4C,OAAhC,CAVe;AAcnCP,MAAAA,OAAO,EAAE9C,GAAG,CAACoD,MAAJ,GAAaK,GAAb,CAAiB,EAAjB,EAAqBC,GAArB,CAAyB,EAAzB,EAA6BL,QAA7B,EAd0B;AAenCL,MAAAA,OAAO,EAAEhD,GAAG,CAACoD,MAAJ,EAf0B;AAgBnCH,MAAAA,QAAQ,EAAEjD,GAAG,CAACoD,MAAJ;AAhByB,KAAnB,CAZpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA+BG,iBAQK;AAAA,QAPJO,YAOI,SAPJA,YAOI;AAAA,QANJC,aAMI,SANJA,aAMI;AAAA,QALJC,UAKI,SALJA,UAKI;AAAA,QAJJC,YAII,SAJJA,YAII;AAAA,QAHJC,MAGI,SAHJA,MAGI;AAAA,QAFJC,MAEI,SAFJA,MAEI;AAAA,QADJC,OACI,SADJA,OACI;AACJ,WACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE/D,MAAM,CAACgE,oBAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEhE,MAAM,CAACiE,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEE,oBAAC,MAAD;AACE,MAAA,WAAW,EAAE;AAAEC,QAAAA,YAAY,EAAE;AAAhB,OADf;AAEE,MAAA,KAAK,EAAEL,MAAM,CAAC7C,UAFhB;AAGE,MAAA,WAAW,EAAE,EAHf;AAIE,MAAA,aAAa,EAAEyC,YAAY,CAAC,YAAD,CAJ7B;AAKE,MAAA,KAAK,EAAEK,MAAM,CAAC9C,UALhB;AAME,MAAA,KAAK,EAAEA,UANT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAUE,oBAAC,MAAD;AACE,MAAA,WAAW,EAAE;AACXkD,QAAAA,YAAY,EAAE,EADH;AAEXC,QAAAA,OAAO,EAAEN,MAAM,CAAC7C,UAAP,KAAsB,IAAtB,GAA6B,MAA7B,GAAsC;AAFpC,OADf;AAKE,MAAA,KAAK,EAAE6C,MAAM,CAACvB,aALhB;AAME,MAAA,WAAW,EAAE;AAAExB,QAAAA,KAAK,EAAE,WAAT;AAAsBC,QAAAA,KAAK,EAAE;AAA7B,OANf;AAOE,MAAA,aAAa,EAAE0C,YAAY,CAAC,eAAD,CAAZ,CAA8BW,IAA9B,CAAmC,KAAnC,CAPjB;AAQE,MAAA,KAAK,EAAEN,MAAM,CAACxB,aARhB;AASE,MAAA,KAAK,EAAErB,kBATT;AAUE,MAAA,YAAY,EAAE4C,MAAM,CAAC7C,UAAP,KAAsB,IAAtB,GAA6B,KAA7B,GAAqC,IAVrD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,EAsBE,oBAAC,KAAD;AACE,MAAA,YAAY,EAAEyC,YAAY,CAAC,aAAD,CAD5B;AAEE,MAAA,MAAM,EAAEE,UAAU,CAAC,aAAD,CAFpB;AAGE,MAAA,WAAW,EAAC,kBAHd;AAIE,MAAA,eAAe,EAAC,MAJlB;AAKE,MAAA,WAAW,EAAE;AACXO,QAAAA,YAAY,EAAE,EADH;AAEXC,QAAAA,OAAO,EAAEN,MAAM,CAAC7C,UAAP,KAAsB,IAAtB,GAA6B,MAA7B,GAAsC;AAFpC,OALf;AASE,MAAA,KAAK,EAAE8C,MAAM,CAACtB,WAThB;AAUE,MAAA,KAAK,EAAEqB,MAAM,CAACrB,WAVhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAtBF,EAkCE,oBAAC,MAAD;AACE,MAAA,WAAW,EAAE;AACX0B,QAAAA,YAAY,EAAE,EADH;AAEXC,QAAAA,OAAO,EAAEN,MAAM,CAAC7C,UAAP,KAAsB,IAAtB,GAA6B,MAA7B,GAAsC;AAFpC,OADf;AAKE,MAAA,KAAK,EAAE6C,MAAM,CAACnB,kBALhB;AAME,MAAA,WAAW,EAAE;AAAE5B,QAAAA,KAAK,EAAE,qBAAT;AAAgCC,QAAAA,KAAK,EAAE;AAAvC,OANf;AAOE,MAAA,aAAa,EAAE0C,YAAY,CAAC,oBAAD,CAP7B;AAQE,MAAA,KAAK,EAAEK,MAAM,CAACpB,kBARhB;AASE,MAAA,KAAK,EAAEvB,kBATT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAlCF,EA8CE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEnB,MAAM,CAACiE,aAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBA9CF,EA+CE,oBAAC,KAAD;AACE,MAAA,YAAY,EAAE,sBAACI,CAAD;AAAA,eACZX,aAAa,CAAC,SAAD,EAAYzD,KAAK,CAACqE,cAAN,CAAqBD,CAArB,CAAZ,CADD;AAAA,OADhB;AAIE,MAAA,MAAM,EAAEV,UAAU,CAAC,SAAD,CAJpB;AAKE,MAAA,WAAW,EAAC,WALd;AAME,MAAA,eAAe,EAAC,iBANlB;AAOE,MAAA,YAAY,EAAC,YAPf;AAQE,MAAA,SAAS,EAAE,EARb;AASE,MAAA,WAAW,EAAE;AAAEO,QAAAA,YAAY,EAAE;AAAhB,OATf;AAUE,MAAA,KAAK,EAAEJ,MAAM,CAAClB,OAVhB;AAWE,MAAA,KAAK,EAAEiB,MAAM,CAACjB,OAXhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA/CF,EA4DE,oBAAC,KAAD;AACE,MAAA,YAAY,EAAEa,YAAY,CAAC,SAAD,CAD5B;AAEE,MAAA,MAAM,EAAEE,UAAU,CAAC,SAAD,CAFpB;AAGE,MAAA,WAAW,EAAC,UAHd;AAIE,MAAA,eAAe,EAAC,MAJlB;AAKE,MAAA,WAAW,EAAE;AAAEO,QAAAA,YAAY,EAAE;AAAhB,OALf;AAME,MAAA,KAAK,EAAEJ,MAAM,CAAChB,OANhB;AAOE,MAAA,KAAK,EAAEe,MAAM,CAACf,OAPhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA5DF,EAqEE,oBAAC,KAAD;AACE,MAAA,YAAY,EAAEW,YAAY,CAAC,UAAD,CAD5B;AAEE,MAAA,MAAM,EAAEE,UAAU,CAAC,UAAD,CAFpB;AAGE,MAAA,WAAW,EAAC,qBAHd;AAIE,MAAA,eAAe,EAAC,MAJlB;AAKE,MAAA,WAAW,EAAE;AAAEO,QAAAA,YAAY,EAAE;AAAhB,OALf;AAME,MAAA,KAAK,EAAEJ,MAAM,CAACf,QANhB;AAOE,MAAA,KAAK,EAAEc,MAAM,CAACd,QAPhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MArEF,EA8EE,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAE/C,MAAM,CAACuE,eAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AACE,MAAA,OAAO,EAAEX,YADX;AAEE,MAAA,QAAQ,EAAE,CAACG,OAFb;AAGE,MAAA,YAAY;AACVS,QAAAA,SAAS,EAAE,QADD;AAEVC,QAAAA,eAAe,EAAE,SAFP;AAGVC,QAAAA,SAAS,EAAE;AAHD,SAIPhE,YAJO,CAHd;AASE,MAAA,SAAS,EAAEC,SATb;AAUE,MAAA,UAAU,EAAEC,UAVd;AAWE,MAAA,KAAK,EAAEH,WAXT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CA9EF,CADF;AAgGD,GAxIH,CADF,CADF;AA8ID,CApMD;;AAsMA,eAAeH,eAAf","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { View, Text, Alert } from 'react-native';\nimport { Formik } from 'formik';\nimport * as yup from 'yup';\nimport AuthContext from '../../contexts/auth';\nimport Styles from './Styles';\nimport * as Utils from './Utils';\nimport Api from '../../services/Api';\n\nimport Button from '../Button';\nimport Input from '../Input';\nimport Select from '../Select';\n\nconst InformacoesForm = ({\n  currentUser,\n  handleCadastro,\n  buttonLabel,\n  buttonStyles,\n  textColor,\n  textWeigth,\n}) => {\n  const { setLoading } = useContext(AuthContext);\n  const [tipoPessoa] = useState([\n    { label: 'Pessoa Física', value: 'PF' },\n    { label: 'Pessoa Jurídica', value: 'PJ' },\n  ]);\n  const [activitiesBranches, setActivitiesBranches] = useState([]);\n  const [economicsActivites, setEconomicsActivities] = useState([]);\n\n  useEffect(() => {\n    const fetchApiData = async () => {\n      setLoading(true);\n      const responseActivitiesBranches = await Api.get(\n        'v1/activities-branches'\n      );\n      if (responseActivitiesBranches.status !== 200) {\n        Alert.alert(\n          'Atenção',\n          'Houve um erro no servidor, reinicie a aplicação'\n        );\n      } else {\n        setActivitiesBranches(\n          responseActivitiesBranches.data.map((i) => {\n            return { Name: i.name, Id: String(i.id) };\n          })\n        );\n        const responseEconomicsActivities = await Api.get(\n          'v1/economics-activities'\n        );\n        if (responseEconomicsActivities.status !== 200) {\n          Alert.alert(\n            'Atenção',\n            'Houve um erro no servidor, reinicie a aplicação'\n          );\n        } else {\n          setEconomicsActivities(\n            responseEconomicsActivities.data.map((i) => {\n              return { label: i.name, value: String(i.id) };\n            })\n          );\n          setLoading(false);\n        }\n      }\n    };\n\n    fetchApiData();\n  }, []);\n  return (\n    <View style={Styles.wrapper}>\n      <Formik\n        enableReinitialize\n        initialValues={{\n          tipoPessoa: currentUser.type,\n          ramoAtividade: String(currentUser.activityBranchId) || '',\n          nomeEmpresa: currentUser.companyName || '',\n          atividadeEconomica: String(currentUser.economicActivityId) || '',\n          celular: currentUser.whatsapp || '',\n          website: currentUser.website || '',\n          facebook: currentUser.facebook || '',\n        }}\n        onSubmit={(data) => handleCadastro(data)}\n        validationSchema={yup.object().shape({\n          tipoPessoa: yup.string().required(),\n          ramoAtividade: yup.string().when('tipoPessoa', {\n            is: 'PF',\n            then: yup.string().required(),\n          }),\n          nomeEmpresa: yup.string().when('tipoPessoa', {\n            is: 'PJ',\n            then: yup.string().required(),\n          }),\n          atividadeEconomica: yup.string().when('tipoPessoa', {\n            is: 'PJ',\n            then: yup.string().required(),\n          }),\n          celular: yup.string().min(14).max(15).required(),\n          website: yup.string(),\n          facebook: yup.string(),\n        })}\n      >\n        {({\n          handleChange,\n          setFieldValue,\n          handleBlur,\n          handleSubmit,\n          values,\n          errors,\n          isValid,\n        }) => {\n          return (\n            <View style={Styles.socialMediaContainer}>\n              <Text style={Styles.labelFormText}>Sou:</Text>\n              <Select\n                customStyle={{ marginBottom: 13 }}\n                value={values.tipoPessoa}\n                placeholder={{}}\n                onValueChange={handleChange('tipoPessoa')}\n                error={errors.tipoPessoa}\n                items={tipoPessoa}\n              />\n              <Select\n                customStyle={{\n                  marginBottom: 13,\n                  display: values.tipoPessoa === 'PJ' ? 'none' : 'flex',\n                }}\n                value={values.ramoAtividade}\n                placeholder={{ label: 'Profissão', value: '' }}\n                onValueChange={handleChange('ramoAtividade').bind(this)}\n                error={errors.ramoAtividade}\n                items={activitiesBranches}\n                isSearchable={values.tipoPessoa === 'PJ' ? false : true}\n              />\n              <Input\n                onChangeText={handleChange('nomeEmpresa')}\n                onBlur={handleBlur('nomeEmpresa')}\n                placeholder=\"Nome da Empresa:\"\n                textContentType=\"name\"\n                customStyle={{\n                  marginBottom: 13,\n                  display: values.tipoPessoa === 'PF' ? 'none' : 'flex',\n                }}\n                error={errors.nomeEmpresa}\n                value={values.nomeEmpresa}\n              />\n              <Select\n                customStyle={{\n                  marginBottom: 13,\n                  display: values.tipoPessoa === 'PF' ? 'none' : 'none',\n                }}\n                value={values.atividadeEconomica}\n                placeholder={{ label: 'Atividade Econômica', value: '' }}\n                onValueChange={handleChange('atividadeEconomica')}\n                error={errors.atividadeEconomica}\n                items={economicsActivites}\n              />\n\n              <Text style={Styles.labelFormText}>Contatos:</Text>\n              <Input\n                onChangeText={(e) =>\n                  setFieldValue('celular', Utils.phoneMaskInput(e))\n                }\n                onBlur={handleBlur('celular')}\n                placeholder=\"WhatsApp:\"\n                textContentType=\"telephoneNumber\"\n                keyboardType=\"number-pad\"\n                maxLength={15}\n                customStyle={{ marginBottom: 13 }}\n                error={errors.celular}\n                value={values.celular}\n              />\n              <Input\n                onChangeText={handleChange('website')}\n                onBlur={handleBlur('website')}\n                placeholder=\"Website:\"\n                textContentType=\"name\"\n                customStyle={{ marginBottom: 13 }}\n                error={errors.website}\n                value={values.website}\n              />\n              <Input\n                onChangeText={handleChange('facebook')}\n                onBlur={handleBlur('facebook')}\n                placeholder=\"Perfil do Facebook:\"\n                textContentType=\"name\"\n                customStyle={{ marginBottom: 13 }}\n                error={errors.facebook}\n                value={values.facebook}\n              />\n              <View style={Styles.buttonContainer}>\n                <Button\n                  onPress={handleSubmit}\n                  disabled={!isValid}\n                  customStyles={{\n                    alignSelf: 'center',\n                    backgroundColor: '#FFD500',\n                    marginTop: 15,\n                    ...buttonStyles,\n                  }}\n                  textColor={textColor}\n                  textWeigth={textWeigth}\n                  label={buttonLabel}\n                />\n              </View>\n            </View>\n          );\n        }}\n      </Formik>\n    </View>\n  );\n};\n\nexport default InformacoesForm;\n"]},"metadata":{},"sourceType":"module"}